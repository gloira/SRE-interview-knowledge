# 操作系统
## 基本定义
操作系统提供了四种抽象模型：
 - 文件：对 I/O 设备的抽象
 - 虚拟内存：对程序存储器的抽象
 - 进程：对一个正在运行程序的抽象
 - 虚拟机：对整个操作系统的抽象
 
我们程序员不会直接和这些硬件打交道，并且每位程序员不可能会掌握所有计算机系统的细节。
所以计算机科学家在硬件的基础之上，安装了一层软件，这层软件能够根据用户输入的指令达到控制硬件的效果，从而满足用户的需求，这样的软件称为 操作系统，它的任务就是为用户程序提供一个更好、更简单、更清晰的计算机模型。也就是说，操作系统相当于是一个中间层，为用户层和硬件提供各自的借口，屏蔽了不同应用和硬件之间的差异，达到统一标准的作用。
![image](https://user-images.githubusercontent.com/81898811/113501580-cfbf1800-9558-11eb-9d8b-e6272f2e9b0e.png)

## 计算机硬件
5个重要组成部分：
- 运算器
- 控制器
--> 运算器和控制及组成了CPU
- 存储器：一种是主存，也就是内存，它是 CPU 主要交互对象，还有一种是外存，比如硬盘软盘等
- 输入设备
- 输出设备
![image](https://user-images.githubusercontent.com/81898811/113501643-5c69d600-9559-11eb-91ff-421845e7629e.png)

CPU(处理器)可能执行简单操作的几个步骤：
- 加载(Load)：从主存中拷贝一个字节或者一个字到内存中，覆盖寄存器先前的内容
- 存储(Store)：将寄存器中的字节或字复制到主存储器中的某个位置，从而覆盖该位置的先前内容
- 操作(Operate)：把两个寄存器的内容复制到 ALU(Arithmetic logic unit)。把两个字进行算术运算，并把结果存储在寄存器中，重写寄存器先前的内容。算术逻辑单元（ALU）是对数字二进制数执行算术和按位运算的组合数字电子电路。
- 跳转(jump)：从指令中抽取一个字，把这个字复制到程序计数器(PC) 中，覆盖原来的值

## 进程和线程
操作系统中最核心的概念就是 进程，进程是对正在运行中的程序的一个抽象。操作系统的其他所有内容都是围绕着进程展开的。
### 进程模型
一个进程就是一个正在执行的程序的实例，进程也包括程序计数器、寄存器和变量的当前值。从概念上来说，每个进程都有各自的虚拟 CPU，但是实际情况是 CPU 会在各个进程之间进行来回切换。
![image](https://user-images.githubusercontent.com/81898811/113501779-748e2500-955a-11eb-8ba9-3d6d892c0b43.png)
如上图所示，这是一个具有 4 个程序的多道处理程序，在进程不断切换的过程中，程序计数器也在不同的变化。
![image](https://user-images.githubusercontent.com/81898811/113501801-8bcd1280-955a-11eb-8258-f12c62576563.png)
在上图中，这 4 道程序被抽象为 4 个拥有各自控制流程（即每个自己的程序计数器）的进程，并且每个程序都独立的运行。当然，实际上只有一个物理程序计数器，每个程序要运行时，其逻辑程序计数器会装载到物理程序计数器中。当程序运行结束后，其物理程序计数器就会是真正的程序计数器，然后再把它放回进程的逻辑计数器中。

从下图我们可以看到，在观察足够长的一段时间后，所有的进程都运行了，但在任何一个给定的瞬间仅有一个进程真正运行。
![image](https://user-images.githubusercontent.com/81898811/113502193-4827d800-955d-11eb-9742-d24af7e12422.png)
因此，当我们说一个 CPU 只能真正一次运行一个进程的时候，即使有 2 个核（或 CPU），每一个核也只能一次运行一个线程。

由于 CPU 会在各个进程之间来回快速切换，所以每个进程在 CPU 中的运行时间是无法确定的。并且当同一个进程再次在 CPU 中运行时，其在 CPU 内部的运行时间往往也是不固定的。

这里的关键思想是认识到一个进程所需的条件，进程是某一类特定活动的总和，它有程序、输入输出以及状态。

### 进程的创建


